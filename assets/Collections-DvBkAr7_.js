import{c as S,b as A,r as t,j as e,m as f,D as k,d as H,B as i,e as N,f as w,g as v,h as C,I as o,i as I}from"./index-DmLfijxt.js";import{L as c}from"./label-DCHFiqzZ.js";import{u as L,a as B,b as T,c as Z}from"./useCollections-C9CdyNsj.js";import{P as b}from"./plus-B0qxDNQy.js";import{P as M}from"./pen-Dgk_R13O.js";const K=S("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]),G=()=>{const z=A(),{data:d,isLoading:D}=L(),p=B(),O=T(),j=Z(),[n,x]=t.useState(""),[u,g]=t.useState(""),[a,r]=t.useState(null),[P,m]=t.useState(!1),[E,h]=t.useState(!1),y=async()=>{if(n.trim())try{await p.mutateAsync({name:n.trim(),description:u.trim()||void 0}),x(""),g(""),m(!1)}catch{}},F=async()=>{if(!(!a||!a.name.trim()))try{await j.mutateAsync({collectionId:a.id,updates:{name:a.name.trim(),description:a.description?.trim()||void 0}}),r(null),h(!1)}catch{}},U=async s=>{if(confirm("Czy na pewno chcesz usunąć tę kolekcję? Wszystkie elementy zostaną usunięte."))try{await O.mutateAsync(s)}catch{}};return D?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):e.jsxs(f.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"space-y-8",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold mb-2",children:"Moje kolekcje"}),e.jsx("p",{className:"text-foreground-secondary",children:"Moje kolekcje"})]}),e.jsxs(k,{open:P,onOpenChange:m,children:[e.jsx(H,{asChild:!0,children:e.jsxs(i,{children:[e.jsx(b,{className:"w-4 h-4 mr-2"}),"Nowa kolekcja"]})}),e.jsxs(N,{children:[e.jsxs(w,{children:[e.jsx(v,{children:"Utwórz kolekcję"}),e.jsx(C,{children:"Nadaj nazwę swojej nowej kolekcji"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(c,{htmlFor:"name",children:"Nazwa"}),e.jsx(o,{id:"name",value:n,onChange:s=>x(s.target.value),placeholder:"Nazwa",onKeyDown:s=>s.key==="Enter"&&y()})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"description",children:"Opis"}),e.jsx(o,{id:"description",value:u,onChange:s=>g(s.target.value),placeholder:"Opis kolekcji"})]}),e.jsx(i,{onClick:y,disabled:!n.trim()||p.isPending,className:"w-full",children:"Zapisz"})]})]})]})]}),!d||d.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-center",children:[e.jsx(K,{className:"w-20 h-20 text-foreground-secondary mb-4"}),e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Brak kolekcji"}),e.jsx("p",{className:"text-foreground-secondary mb-6",children:"Utwórz swoją pierwszą kolekcję, aby zacząć organizować filmy i seriale"}),e.jsxs(i,{onClick:()=>m(!0),children:[e.jsx(b,{className:"w-4 h-4 mr-2"}),"Utwórz pierwszą kolekcję"]})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:d.map(s=>e.jsxs(f.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-background-secondary rounded-xl p-6 hover:bg-background-secondary/80 transition-colors cursor-pointer group",onClick:()=>z(`/collections/${s.id}`),children:[e.jsx("div",{className:"flex items-start justify-between mb-4",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-xl font-bold mb-1 group-hover:text-primary transition-colors",children:s.name}),s.description&&e.jsx("p",{className:"text-sm text-foreground-secondary line-clamp-2",children:s.description})]})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm text-foreground-secondary",children:[s.itemCount," ",s.itemCount===1?"element":"elementów"]}),e.jsxs("div",{className:"flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx(i,{size:"icon",variant:"ghost",onClick:l=>{l.stopPropagation(),r({id:s.id,name:s.name,description:s.description}),h(!0)},children:e.jsx(M,{className:"w-4 h-4"})}),e.jsx(i,{size:"icon",variant:"ghost",onClick:l=>{l.stopPropagation(),U(s.id)},children:e.jsx(I,{className:"w-4 h-4"})})]})]})]},s.id))}),e.jsx(k,{open:E,onOpenChange:h,children:e.jsxs(N,{children:[e.jsxs(w,{children:[e.jsx(v,{children:"Edytuj kolekcję"}),e.jsx(C,{children:"Zmień nazwę lub opis kolekcji"})]}),a&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(c,{htmlFor:"edit-name",children:"Nazwa"}),e.jsx(o,{id:"edit-name",value:a.name,onChange:s=>r({...a,name:s.target.value}),placeholder:"Nazwa"})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"edit-description",children:"Opis (opcjonalnie)"}),e.jsx(o,{id:"edit-description",value:a.description||"",onChange:s=>r({...a,description:s.target.value}),placeholder:"Opis kolekcji"})]}),e.jsx(i,{onClick:F,disabled:!a.name.trim()||j.isPending,className:"w-full",children:"Zapisz zmiany"})]})]})})]})};export{G as default};
